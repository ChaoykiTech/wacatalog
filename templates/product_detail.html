{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="{% static 'favicon.png' %}" type="image/png">

<title>{{ product.name }} | {{ vendor.business_name }}</title>

{% if vendor.logo and vendor.logo.url %}
<link rel="icon" href="{{ vendor.logo.url }}" type="image/png">
{% else %}
<link rel="icon" href="{% static 'default_favicon.png' %}" type="image/png">
{% endif %}

<style>
*{box-sizing:border-box}
body{
    margin:0;
    font-family:'Segoe UI',system-ui,-apple-system,sans-serif;
    background:#f4f6f8;
    color:#222;
}

/* ================= HEADER ================= */
.vendor-header{
    background:linear-gradient(135deg,#1e6b3a,#124d28);
    color:#fff;
    padding:1.5rem 1rem;
}
.vendor-header-inner{
    max-width:1100px;
    margin:auto;
    display:flex;
    align-items:center;
    gap:16px;
}
.vendor-header img{
    width:70px;
    height:70px;
    border-radius:50%;
    object-fit:cover;
    border:3px solid rgba(255,255,255,.85);
}
.vendor-header h2{margin:0;font-size:1.4rem}
.vendor-header p{margin:.2rem 0 0;font-size:.9rem;opacity:.9}

/* ================= BACK BUTTON ================= */
.back-wrap{
    max-width:1100px;
    margin:1rem auto 0;
    padding:0 1rem;
}
.back-btn{
    background:#c9a437;
    color:#000;
    border:none;
    padding:.55rem 1rem;
    border-radius:8px;
    font-weight:600;
    cursor:pointer;
}

/* ================= LAYOUT ================= */
.product-container{
    max-width:1100px;
    margin:1.5rem auto 3rem;
    padding:0 1rem;
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:2rem;
}

/* ================= CAROUSEL ================= */
.carousel{
    position:relative;
    overflow:hidden;
    border-radius:18px;
    background:#fff;
    box-shadow:0 12px 30px rgba(0,0,0,.15);
}
.carousel-track{
    display:flex;
    transition:transform .4s ease;
}
.carousel img{
    width:100%;
    flex-shrink:0;
    object-fit:contain;
    background:#fff;
}
.carousel-btn{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    background:rgba(0,0,0,.5);
    color:#fff;
    border:none;
    width:42px;
    height:42px;
    border-radius:50%;
    cursor:pointer;
}
.carousel-btn.prev{left:10px}
.carousel-btn.next{right:10px}

/* ================= PRODUCT INFO ================= */
.product-info{
    background:rgba(255,255,255,.55);
    backdrop-filter:blur(12px);
    border-radius:18px;
    padding:1.8rem;
    box-shadow:0 10px 28px rgba(0,0,0,.18);
}
.product-info h1{margin-top:0;font-size:1.9rem;color:#1e6b3a}
.price{
    font-size:1.4rem;
    font-weight:700;
    color:#c9a437;
    margin:.6rem 0;
}
.product-info p{line-height:1.6;font-size:.95rem}

/* ================= BUTTONS ================= */
.actions{
    margin-top:1.4rem;
    display:flex;
    flex-wrap:wrap;
    gap:12px;
}
.btn{
    flex:1;
    text-align:center;
    padding:.9rem 1rem;
    border-radius:12px;
    font-weight:700;
    text-decoration:none;
    color:#fff;
    background:linear-gradient(135deg,#1e6b3a,#124d28);
    box-shadow:0 6px 22px rgba(37,211,102,.35);
    transition:.25s ease;
}
.btn:hover{transform:translateY(-2px);box-shadow:0 12px 30px rgba(37,211,102,.45)}

/* ================= RESPONSIVE ================= */
@media(max-width:900px){
    .product-container{grid-template-columns:1fr}
}
@media(max-width:480px){
    .product-info{padding:1.2rem}
    .product-info h1{font-size:1.5rem}
    .price{font-size:1.2rem}
}

/* Advert */
.advert-section { background:#c9a437; padding:20px; margin:30px 0; border-radius:8px; text-align:center; }

/* Footer */
footer { background:#f1f1f1; padding:20px; text-align:center; border-top:1px solid #ccc; }

</style>
</head>
<body>

<!-- BACK -->
<div class="back-wrap">
    <button class="back-btn" onclick="history.back()">← Back</button>
</div>

<!-- HEADER -->
<div class="vendor-header">
    <div class="vendor-header-inner">
        {% if vendor.logo %}
            <img src="{{ vendor.logo.url }}" alt="{{ vendor.business_name }}">
        {% endif %}
        <div>
            <h2>{{ vendor.business_name }}</h2>
            <p>Trusted Vendor on WACatalog</p>
        </div>
    </div>
</div>

<!-- CONTENT -->
<div class="product-container">

    <!-- IMAGE CAROUSEL -->
    <div class="carousel" id="carousel">
        <div class="carousel-track" id="carouselTrack">
            {% for img in product.images.all %}
                <img src="{{ img.image.url }}" alt="{{ product.name }}">
            {% endfor %}
        </div>
        {% if product.images.count > 1 %}
        <button class="carousel-btn prev" onclick="slide(-1)">❮</button>
        <button class="carousel-btn next" onclick="slide(1)">❯</button>
        {% endif %}
    </div>

    <!-- PRODUCT INFO -->
    <div class="product-info">
        <h1>{{ product.name }}</h1>
        <div class="price">₦{{ product.price }}</div>
        <p>{{ product.description }}</p>

        <div class="actions">
            <a href="https://api.whatsapp.com/send?phone={{ vendor.phone }}&text=Hello,%20I%20am%20interested%20in%20{{ product.name }}.%0A%0APrice:%20₦{{ product.price }}%0AProduct%20link:%20{{ request.build_absolute_uri }}" target="_blank" class="btn">
                Order on WhatsApp
            </a>
        </div>
    </div>

</div>

<div class="advert-section">
<h3>Create Your Own Store!</h3>
<p>Join WACatalog today and start your own WhatsApp-Powered Online Store.</p>
<a href="/register" target="_blank"><button>Create My Store</button></a>
</div>

</div>



<!-- Footer -->
<footer>
    <p style="margin:0; font-size:14px; color:#555;">
        &copy; {{ current_year }} <strong>WACatalog</strong> - Simplifying your online store. <br>
        Powered by <a href="{% url 'home' %}" target="_blank" style="color:#1e6b3a; text-decoration:none;">WACatalog</a>
    </p>
</footer>

<script>
let index = 0;
function slide(dir){
    const track = document.getElementById('carouselTrack');
    const total = track.children.length;
    index = (index + dir + total) % total;
    track.style.transform = `translateX(-${index * 100}%)`;
}
</script>

</body>
</html>