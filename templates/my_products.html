<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="{% static 'favicon.png' %}" type="image/png">

<title>My Products - WACatalog</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
body { background: linear-gradient(135deg, #ffffff 0%, #e0f7e0 100%); color:#333; min-height:100vh; }
a { text-decoration:none; }

.container { max-width:900px; margin:100px auto; padding:20px; }
h2 { color:#1e6b3a; text-align:center; margin-bottom:25px; }

.upload-btn {
    display:inline-block; background:#1e6b3a; color:white; padding:10px 20px; border-radius:50px;
    font-weight:bold; margin-bottom:20px; transition:background 0.3s, transform 0.2s;
}
.upload-btn:hover { background:#228B22; transform: translateY(-2px); }

.product-card {
    display:flex; flex-wrap:wrap; align-items:flex-start; background: rgba(255,255,255,0.6);
    border-radius:15px; padding:15px; margin-bottom:20px; box-shadow:0 8px 32px rgba(0,0,0,0.1);
    backdrop-filter: blur(10px); transition: transform 0.3s, box-shadow 0.3s;
}
.product-card:hover { transform: translateY(-3px); box-shadow:0 12px 40px rgba(0,0,0,0.15); }

.product-card img { max-width:150px; border-radius:8px; margin-right:15px; margin-bottom:10px; }

.product-info { flex:1; min-width:200px; }

.product-info h3 { color:#1e6b3a; margin-bottom:5px; }
.product-info p { margin-bottom:6px; }

.action-btn {
    display:inline-block; background:#c9a437; color:white; padding:6px 15px; border-radius:25px;
    font-weight:600; margin-right:8px; margin-top:5px; transition:background 0.3s, transform 0.2s;
}
.action-btn:hover { background:#b88e2f; transform: translateY(-1px); }

.back-link { display:block; text-align:center; margin-top:25px; font-weight:bold; color:#1e6b3a; transition: color 0.3s; }
.back-link:hover { color:#228B22; }

@media(max-width:768px) {
    .product-card { flex-direction:column; }
    .product-card img { margin-right:0; margin-bottom:10px; }
}
</style>
</head>
<body>

<div class="container">
    <h2>My Products</h2>

    <a href="/products/add" class="upload-btn">+ Upload New Product</a>
    <hr style="margin:15px 0; border:none; border-top:1px solid #ccc;">

    {% if products %}
        {% for p in products %}
        <div class="product-card">
            {% if p.images.all %}
            <img src="{{ p.images.all.0.image.url }}" alt="{{ p.name }}">
            {% endif %}
            <div class="product-info">
                <h3>{{ p.name }}</h3>
                <p>{{ p.category }}</p>
                <p><strong>Price:</strong> ₦{{ p.price }}</p>
                <p><strong>Status:</strong> {{ p.status|title }}</p>
                <p>{{ p.description }}</p>

                <a href="/products/toggle/{{ p.id }}" class="action-btn">Toggle Sold/Available</a>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p style="text-align:center; color:#555; margin-top:20px;">No products uploaded yet.</p>
    {% endif %}

    {% if products.has_other_pages %}
    <div style="margin-top:20px; text-align:center;">
        {% if products.has_previous %}
            <a href="?page={{ products.previous_page_number }}" class="btn btn-secondary">Previous</a>
        {% endif %}

        <span style="margin:0 10px;">
            Page {{ products.number }} of {{ products.paginator.num_pages }}
        </span>

        {% if products.has_next %}
            <a href="?page={{ products.next_page_number }}" class="btn btn-secondary">Next</a>
        {% endif %}
    </div>
    {% endif %}
    <a href="/dashboard" class="back-link">← Back to Dashboard</a>
</div>

</body>
</html>
